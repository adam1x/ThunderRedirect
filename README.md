# ThunderRedirect

Download links from "Thunder Lixian" go through an HTTP redirection until getting to the actual URLs. Thunder geoblocks its services in the US by redirecting to a bogus domain. This script captures the actual URLs by accessing download links through a proxy and then forwards them to a running `aria2` instance.

## Usage
User needs to input:

- the hostname [aria2](https://github.com/aria2/aria2) is running on (with [JSON-RPC](https://aria2.github.io/manual/en/html/aria2c.html#rpc-options) enabled),
- an RPC authorization secret token,
- address to a proxy server,
- raw aria2 commands generated by [ThunderLixianExporter](https://github.com/binux/ThunderLixianExporter).

After a proxy server is supplied for the first time, it will be saved in `proxy.txt`.

## Known issues

- When adding more than one downloads, if one of the middle ones failed, the following raw aria2 commands will be written to `stdin`. If there is a newline character within these commands, some of them will be executed.

## TODO

- Add support for custom aria2 JSON-RPC port number (default is 6800).
