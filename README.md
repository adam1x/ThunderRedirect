# ThunderRedirect

"[Thunder Lixian](http://lixian.xunlei.com/)" downloads normally go through an HTTP redirection before arriving at file-hosting servers. However, Thunder geoblocks its "Lixian" service in the U.S. by redirecting download requests (as well as its web interface) to a bogus domain. This script retrieves actual file-serving URLs through a proxy and then forwards them to a running `aria2` instance for downloading.

## Usage
User needs to input:

- the hostname [`aria2`](https://github.com/aria2/aria2) is running on (with [JSON-RPC](https://aria2.github.io/manual/en/html/aria2c.html#rpc-options) enabled),
- an RPC authorization secret token,
- address to a proxy server,
- raw `aria2` commands generated by [`ThunderLixianExporter`](https://github.com/binux/ThunderLixianExporter).

After a proxy server is supplied for the first time, it will be saved in `proxy.txt`.

## Required modules

- [`requests`](https://github.com/requests/requests)

## Note

- This script is written in Python 3. It is not compatible with Python 2, mainly because of changes made to the [`input()`](https://docs.python.org/3/library/functions.html#input) function.

## Known issues

- While adding more than one downloads, if any but the last one failed, all raw `aria2` commands that follow will be written to `stdin`. And, as such, they will be treated by the shell as regular commands and executed.

## TODO

- Add support for custom `aria2` JSON-RPC port number (default is 6800).
